<!DOCTYPE html>
<html
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	lang="en"
>
	<head>
		<!-- head links and meta datas -->
		<div th:replace="_fragments::heads"></div>

		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
			integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
			crossorigin=""
		/>
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.css"
		/>
	</head>

	<body onresize="resize()">
		<!-- Navigation bar fragment -->
		<div th:replace="_fragments :: navigation"></div>

		<!-- content -->
		<div class="searching mt-5">
			<div class="flex md:flex-row flex-col justify-around items-center">
				<input
					type="text"
					class="md:w-1/2 mx-4 w-11/12 border-b-4 border-red-500 focus:outline-none"
					placeholder="Type your medicine here"
				/>
				<div
					class="flex justify-around mt-3 md:w-9/12 lg:w-2/3 xl:w-1/3 flex-col sm:flex-row"
				>
					<button
						class="bg-green-300 mx-1 px-5 sm:px-5 py-2 sm:mx-5 hover:bg-cyan-200 rounded-full"
					>
						Search in a region
					</button>
					<button
						id="byLocation"
						class="bg-green-300 my-5 sm:my-0 mx-1 px-5 sm:px-5 py-2 sm:mx-5 hover:bg-cyan-200 rounded-full"
					>
						Search closest to me
					</button>
				</div>
			</div>
		</div>

		<div class="min-h-screen">
			<div
				th:if="not ${pharmacies}"
				class="items-center mt-10 py-5 rounded-xl shadow-lg md:mx-16 lg:mx-40 h-2/4"
			>
				<p class="text-2xl text-red-500 m-auto w-fit">
					The medicine you searched for in not found!
				</p>
			</div>
			<div
				th:if="${pharmacies}"
				class="flex flex-col justify-center items-center mt-10 py-5 rounded-xl shadow-lg md:mx-16 lg:mx-52"
			>
				<script th:inline="javascript">
					/*<![CDATA[*/
					var coordinates = [];
					/*]]>*/
				</script>
				<div
					th:each="pharmacy : ${pharmacies}"
					class="flex flex-col justify-between items-center w-10/12 rounded-xl my-2 bg-cyan-100"
				>
					<div class="ml-3" th:text="${pharmacy.name}">Pharmacy name</div>
					<div class="flex justify-between items-center w-full rounded-xl">
						<div
							class="flex flex-col justify-center items-center rounded-xl m-2"
						></div>
						<div
							class="overflow-hidden w-2/5 h-40 bg-yellow-400 rounded-xl mt-0 m-3"
							th:id="map+(${pharmacy.Id})"
						></div>
						<script th:inline="javascript" type="text/javascript">
							/*<![CDATA[*/
							var coords = /*[[${pharmacy.location}]]*/ "0.0,0.0";
							var name = /*[[${pharmacy.name}]]*/ "Unkown";
							var id = String(/*[[${pharmacy.Id}]]*/);
							// console.log(user_lon, user_lat);

							coords = coords.split(",");
							coordinates.push([name, coords[1], coords[0], id]);

							/*]]>*/
						</script>
					</div>
				</div>
			</div>
		</div>

		<div th:replace="_fragments ::footer"></div>
		<script
			src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
			integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
			crossorigin=""
		></script>
		<script src="https://unpkg.com/leaflet-routing-machine@latest/dist/leaflet-routing-machine.js"></script>
		<script th:src="@{/js/home.js}"></script>
	</body>
</html>
